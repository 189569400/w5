webpackJsonp([7],{"7his":function(e,a){},oBjx:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=[{title:"账号",dataIndex:"account",key:"account",scopedSlots:{customRender:"account"}},{title:"昵称",dataIndex:"nick_name",key:"nick_name",scopedSlots:{customRender:"nick_name"}},{title:"E-Mail",dataIndex:"email",key:"email"},{title:"更新时间",key:"update_time",dataIndex:"update_time",scopedSlots:{customRender:"update_time"}},{title:"创建时间",key:"create_time",dataIndex:"create_time",scopedSlots:{customRender:"create_time"}},{title:"状态",key:"status",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"},width:60}],n={name:"userHome",data:function(){return{columns:s,loading:!1,data:[],formAdd:this.$form.createForm(this),visible_add:!1,formUpdate:this.$form.createForm(this),visible_edit:!1,key:0,loadingUpdate:!1,loadingAdd:!1}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loading=!0,this.$http.post("/api/v1/w5/get/user/list",{keywords:a}).then(function(a){0==a.code?(e.data=a.data,e.loading=!1):(e.$message.error(a.msg),e.loading=!1)})},del:function(e){var a=this;this.$http.post("/api/v1/w5/post/user/del",{id:e}).then(function(e){0==e.code?(a.$message.success("删除成功"),a.onLoad()):a.$message.error(e.msg)})},onAdd:function(e){var a=this;e.preventDefault(),this.formAdd.validateFields(function(e,t){if(!e){if(a.loadingAdd=!0,t.passwd!==t.repasswd)return a.$message.warning("两次密码不相同"),a.loadingAdd=!1,!1;a.$http.post("/api/v1/w5/post/user/add",{account:t.account,passwd:t.passwd,nick_name:t.nick_name,email:t.email}).then(function(e){0==e.code?(a.$message.success("添加成功"),a.loadingAdd=!1,a.onCloseAdd(),a.onLoad()):(a.$message.error(e.msg),a.loadingAdd=!1)})}})},onUpdate:function(e){var a=this;e.preventDefault(),this.formUpdate.validateFields(function(e,t){if(!e){a.loadingUpdate=!0;var s="";if(void 0===t.passwd&&(t.passwd=""),void 0===t.repasswd&&(t.repasswd=""),t.passwd!==t.repasswd)return a.$message.warning("两次密码不相同"),a.loadingUpdate=!1,!1;s=t.passwd,a.$http.post("/api/v1/w5/post/user/update",{id:a.key,nick_name:t.nick_name,email:t.email,passwd:s}).then(function(e){0==e.code?(a.$message.success("更新成功"),a.loadingUpdate=!1,a.onCloseEdit(),a.onLoad()):(a.$message.error(e.msg),a.loadingUpdate=!1)})}})},showEdit:function(e,a,t,s){var n=this;setTimeout(function(){n.formUpdate.setFieldsValue({account:a,nick_name:t,email:s})},100),this.key=e,this.visible_edit=!0},onCloseEdit:function(){this.visible_edit=!1},showAdd:function(){var e=this;setTimeout(function(){e.formAdd.setFieldsValue({account:"",nick_name:"",email:""})},100),this.visible_add=!0},onCloseAdd:function(){this.visible_add=!1},onSearch:function(e){this.onLoad(e)},onSwitch:function(e,a){var t=this,s=1;e&&(s=0),this.$http.post("/api/v1/w5/post/user/status",{id:a,status:s}).then(function(e){0==e.code?(t.$message.success("操作成功"),t.onLoad()):t.$message.error(e.msg)})}}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-layout-content",[t("div",{staticClass:"header_div"},[t("a-input-search",{staticClass:"align",staticStyle:{width:"200px"},attrs:{placeholder:"请输入账号/昵称/邮箱"},on:{search:e.onSearch}}),e._v(" "),t("a-button",{staticClass:"align btn_add",attrs:{type:"primary",icon:"plus-circle"},on:{click:e.showAdd}},[e._v("\n            添加\n        ")])],1),e._v(" "),t("a-table",{attrs:{rowKey:"id",columns:e.columns,"data-source":e.data,loading:e.loading},scopedSlots:e._u([{key:"nick_name",fn:function(a){return t("span",{},[t("b",[e._v(e._s(a))])])}},{key:"account",fn:function(a){return t("a-tag",{attrs:{color:"#7d838c"}},[e._v("\n            "+e._s(a)+"\n        ")])}},{key:"update_time",fn:function(a){return t("span",{},[e._v("\n            "+e._s(e.Dayjs(a).subtract(8,"hour").format("YYYY-MM-DD HH:mm:ss"))+"\n        ")])}},{key:"create_time",fn:function(a){return t("span",{},[e._v("\n            "+e._s(e.Dayjs(a).subtract(8,"hour").format("YYYY-MM-DD HH:mm:ss"))+"\n        ")])}},{key:"status",fn:function(a,s){return t("div",{},[t("a-switch",0===a?{attrs:{"default-checked":""},on:{click:function(a){return e.onSwitch(a,s.id)}}}:{on:{click:function(a){return e.onSwitch(a,s.id)}}},[t("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),e._v(" "),t("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1)}},{key:"action",fn:function(a,s){return t("span",{},[t("a-space",{attrs:{size:"small"}},[t("a-tooltip",{attrs:{placement:"left"}},[t("template",{slot:"title"},[t("span",[e._v("删除")])]),e._v(" "),t("a-popconfirm",{attrs:{title:"是否要删除该用户?","ok-text":"是","cancel-text":"否"},on:{confirm:function(a){return e.del(s.id)}}},[t("a-icon",{staticClass:"pointer",attrs:{type:"delete"}})],1)],2),e._v(" "),t("span",[e._v("|")]),e._v(" "),t("a-tooltip",{attrs:{placement:"top"}},[t("template",{slot:"title"},[t("span",[e._v("编辑")])]),e._v(" "),t("a-icon",{staticClass:"pointer",attrs:{type:"form"},on:{click:function(a){return e.showEdit(s.id,s.account,s.nick_name,s.email)}}})],2)],1)],1)}}])}),e._v(" "),t("a-drawer",{attrs:{title:"添加新用户",width:300,visible:e.visible_add,"body-style":{paddingBottom:"80px"}},on:{close:e.onCloseAdd}},[t("a-form",{attrs:{form:e.formAdd,layout:"vertical"},on:{submit:e.onAdd}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{required:!0,message:"请输入用户账号"},{min:2,message:"账号长度不能少于2位"},{max:20,message:"账号长度不能超过20位"}]}],expression:"[\n                  'account',\n                  {\n                    rules: [\n                      { required: true, message: '请输入用户账号' },\n                      { min: 2, message: '账号长度不能少于2位' },\n                      { max: 20, message: '账号长度不能超过20位' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"请输入用户账号"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"昵称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nick_name",{rules:[{required:!0,message:"请输入用户昵称"},{min:2,message:"昵称长度不能少于2位"},{max:20,message:"昵称长度不能超过20位"}]}],expression:"[\n                  'nick_name',\n                  {\n                    rules: [\n                      { required: true, message: '请输入用户昵称' },\n                      { min: 2, message: '昵称长度不能少于2位' },\n                      { max: 20, message: '昵称长度不能超过20位' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"请输入用户昵称"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"E-Mail"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:"请输入用户 E-Mail"},{min:6,message:"邮箱长度不能少于6位"},{max:50,message:"邮箱长度不能超过50位"}]}],expression:"[\n                  'email',\n                  {\n                    rules: [\n                      { required: true, message: '请输入用户 E-Mail' },\n                      { min: 6, message: '邮箱长度不能少于6位' },\n                      { max: 50, message: '邮箱长度不能超过50位' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"请输入用户 E-Mail"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"密码"}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["passwd",{rules:[{required:!0,message:"请输入用户密码"},{min:8,message:"密码长度不能少于8位"},{max:16,message:"密码长度不能超过16位"}]}],expression:"[\n                  'passwd',\n                  {\n                    rules: [\n                      { required: true, message: '请输入用户密码' },\n                      { min: 8, message: '密码长度不能少于8位' },\n                      { max: 16, message: '密码长度不能超过16位' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"请输入用户密码",type:"password"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"确认密码"}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["repasswd",{rules:[{required:!0,message:"请确认用户密码"},{min:8,message:"密码长度不能少于8位"},{max:16,message:"密码长度不能超过16位"}]}],expression:"[\n                  'repasswd',\n                  {\n                    rules: [\n                      { required: true, message: '请确认用户密码' },\n                      { min: 8, message: '密码长度不能少于8位' },\n                      { max: 16, message: '密码长度不能超过16位' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"请确认用户密码",type:"password"}})],1)],1)],1),e._v(" "),t("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[t("a-button",{style:{marginRight:"8px"},on:{click:e.onCloseAdd}},[e._v("关闭")]),e._v(" "),t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.loadingAdd}},[e._v("\n                    添加\n                ")])],1)],1)],1),e._v(" "),t("a-drawer",{attrs:{title:"更新用户信息",width:300,visible:e.visible_edit,"body-style":{paddingBottom:"80px"}},on:{close:e.onCloseEdit}},[t("a-form",{attrs:{form:e.formUpdate,layout:"vertical"},on:{submit:e.onUpdate}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{required:!0,message:"请输入用户账号"}]}],expression:"[\n                  'account',\n                  {\n                    rules: [{ required: true, message: '请输入用户账号' }],\n                  },\n                ]"}],attrs:{placeholder:"请输入用户账号",disabled:!0}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"昵称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nick_name",{rules:[{required:!0,message:"请输入用户昵称"},{min:2,message:"昵称长度不能少于2位"},{max:20,message:"昵称长度不能超过20位"}]}],expression:"[\n                  'nick_name',\n                  {\n                    rules: [\n                      { required: true, message: '请输入用户昵称' },\n                      { min: 2, message: '昵称长度不能少于2位' },\n                      { max: 20, message: '昵称长度不能超过20位' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"请输入用户昵称"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"E-Mail"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:"请输入用户 E-Mail"},{min:6,message:"邮箱长度不能少于6位"},{max:50,message:"邮箱长度不能超过50位"}]}],expression:"[\n                  'email',\n                  {\n                    rules: [\n                      { required: true, message: '请输入用户 E-Mail' },\n                      { min: 6, message: '邮箱长度不能少于6位' },\n                      { max: 50, message: '邮箱长度不能超过50位' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"请输入用户 E-Mail"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"密码"}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["passwd",{rules:[{min:8,message:"密码长度不能少于8位"},{max:16,message:"密码长度不能超过16位"}]}],expression:"[\n                        'passwd',{\n                        rules: [\n                            { min: 8, message: '密码长度不能少于8位' },\n                            { max: 16, message: '密码长度不能超过16位' },\n                        ]}]"}],attrs:{placeholder:"请输入用户密码",type:"password"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"确认密码"}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["repasswd",{rules:[{min:8,message:"密码长度不能少于8位"},{max:16,message:"密码长度不能超过16位"}]}],expression:"[\n                        'repasswd',{\n                        rules: [\n                            { min: 8, message: '密码长度不能少于8位' },\n                            { max: 16, message: '密码长度不能超过16位' },\n                        ]}]"}],attrs:{placeholder:"请确认用户密码",type:"password"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:24}},[t("p",{staticClass:"center"},[e._v("提示：密码不填写，默认不修改密码")])])],1),e._v(" "),t("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[t("a-button",{style:{marginRight:"8px"},on:{click:e.onCloseEdit}},[e._v("关闭")]),e._v(" "),t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.loadingUpdate}},[e._v("\n                    更新\n                ")])],1)],1)],1)],1)},staticRenderFns:[]};var i=t("Mz/3")(n,r,!1,function(e){t("7his")},"data-v-01627fa0",null);a.default=i.exports}});
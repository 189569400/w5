webpackJsonp([8],{UOTW:function(t,e){},fhOb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[{title:"剧本名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"},width:150},{title:"APP 名称",dataIndex:"app_name",key:"app_name",scopedSlots:{customRender:"app_name"},width:120},{title:"执行结果",dataIndex:"result",key:"result",scopedSlots:{customRender:"result"}},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"},width:60},{title:"创建时间",key:"create_time",dataIndex:"create_time",scopedSlots:{customRender:"create_time"},width:190},{title:"操作",key:"action",scopedSlots:{customRender:"action"},width:60}],o={name:"logsHome",data:function(){return{columns:n,loading:!1,data:[],type_data:[],so_text:""}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.loading=!0,this.$http.post("/api/v1/w5/get/logs/list",{keywords:e,type:a}).then(function(e){0==e.code?(t.data=e.data,t.onSelectType(),t.loading=!1):(t.$message.error(e.msg),t.loading=!1)})},onSelectType:function(){var t=this;this.$http.post("/api/v1/w5/get/workflow/list",{type:0}).then(function(e){0==e.code?t.type_data=e.data:t.$message.error(e.msg)})},del:function(t){var e=this;this.$http.post("/api/v1/w5/post/logs/del",{id:t}).then(function(t){0==t.code?(e.$message.success("删除成功"),e.onLoad()):e.$message.error(t.msg)})},onSearch:function(t){this.so_text=t,this.onLoad(this.so_text,this.select_type)},onSelect:function(t){this.select_type=t,this.onLoad(this.so_text,this.select_type)},onFilterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout-content",[a("div",{staticClass:"header_div"},[a("a-select",{staticClass:"align",staticStyle:{width:"120px"},attrs:{"show-search":"","filter-option":t.onFilterOption,"default-value":"0"},on:{change:t.onSelect}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),t._v(" "),t._l(t.type_data,function(e,n){return a("a-select-option",{key:n,attrs:{value:e.uuid}},[t._v(t._s(e.name))])})],2),t._v(" "),a("a-input-search",{staticClass:"align",staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字"},on:{search:t.onSearch}})],1),t._v(" "),a("a-table",{attrs:{rowKey:"id",columns:t.columns,"data-source":t.data,loading:t.loading},scopedSlots:t._u([{key:"name",fn:function(e){return a("span",{},[a("b",[t._v(t._s(e))])])}},{key:"app_name",fn:function(e){return a("a-tag",{attrs:{color:"#7d838c"}},[t._v("\n            "+t._s(e)+"\n        ")])}},{key:"status",fn:function(e){return a("span",{},[0==e?a("a-tag",{attrs:{color:"#469823"}},[t._v("正常")]):t._e(),t._v(" "),1==e?a("a-tag",{attrs:{color:"#9e8c0a"}},[t._v("警告")]):t._e(),t._v(" "),2==e?a("a-tag",{attrs:{color:"#9c5656"}},[t._v("错误")]):t._e(),t._v(" "),3==e?a("a-tag",{attrs:{color:"#bf0c0c"}},[t._v("危险")]):t._e()],1)}},{key:"create_time",fn:function(e){return a("di",{},[t._v("\n            "+t._s(t.Dayjs(e).subtract(8,"hour").format("YYYY-MM-DD HH:mm:ss"))+"\n        ")])}},{key:"action",fn:function(e,n){return a("div",{staticStyle:{"text-align":"center"}},[a("a-space",{attrs:{size:"small"}},[a("a-tooltip",{attrs:{placement:"left"}},[a("template",{slot:"title"},[a("span",[t._v("删除")])]),t._v(" "),a("a-popconfirm",{attrs:{title:"是否要删除该日记?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.del(n.id)}}},[a("a-icon",{staticClass:"pointer",attrs:{type:"delete"}})],1)],2)],1)],1)}}])})],1)},staticRenderFns:[]};var i=a("Mz/3")(o,s,!1,function(t){a("UOTW")},"data-v-8a995618",null);e.default=i.exports}});